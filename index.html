<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pitango-style Game</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="toolbar">
    <div>
      <h1>ピタンゴ風 連想しりとりゲーム</h1>
    </div>
    <div class="row">
      <button class="btn ghost" id="btnReset" title="すべて初期化">初期化</button>
      <label class="btn" for="fileResume" title="保存したゲームJSONを読み込む">保存から再開</label>
      <input id="fileResume" type="file" accept="application/json,.json" style="display:none" />
    </div>
  </header>

  <main class="grid" id="app">
    <!-- Left column: Players & Settings -->
    <section class="card">
      <h2>プレイヤー（1〜10人）</h2>
      <div class="row gap-md">
        <button class="btn primary" id="btnAdd">＋ 追加</button>
        <button class="btn" id="btnClearPlayers">全員削除</button>
        <span class="count-chip" id="playerCount">0 人</span>
      </div>
      <div class="players" id="playerList" aria-live="polite"></div>

      <div class="stats">
        <div class="stat"><div class="label">配布枚数 / 人</div><div class="value"><span id="perHandValue">7</span></div></div>
        <div class="stat"><div class="label">必要カード枚数</div><div class="value"><span id="needCards">0</span></div></div>
        <div class="stat"><div class="label">利用可能カード</div><div class="value"><span id="availableCards">0</span></div></div>
      </div>

      <div class="two-cols">
        <div>
          <label for="perHand">1人あたり配布枚数</label>
          <input id="perHand" type="number" min="1" max="20" value="7" />
        </div>
        <div>
          <label for="seed">シャッフルシード（任意）</label>
          <input id="seed" type="text" placeholder="例: 42" />
        </div>
      </div>

      <!-- 開始時の場の単語 -->
      <div class="two-cols">
        <div>
          <label for="startWord">開始時の「場」の単語</label>
          <input id="startWord" type="text" value="しりとり" />
        </div>
        <div></div>
      </div>

      <div class="footer">
        <div class="note" id="validationMsg">—</div>
        <button class="btn success" id="btnStart" disabled>ゲーム開始 ▶︎</button>
      </div>
    </section>

    <!-- Right column: Cards -->
    <section class="card">
      <h2>お題カードセット（改行区切りで自由編集）</h2>
      <div class="row gap-md">
        <button class="btn accent" id="btnLoadDefault">デフォルト読込</button>
        <button class="btn" id="btnClean">重複除去</button>
        <button class="btn" id="btnExport">エクスポート</button>
        <label class="btn" for="fileImport" title=".txtインポート"><span class="icon">📥</span> インポート</label>
        <input id="fileImport" type="file" accept="text/plain" style="display:none" />
        <span class="pill" id="cardCount">0 枚</span>
      </div>
      <label for="cardText" class="mini">ヒント：短い連想フレーズ（例「形のない」「空を飛ぶ」「〜の」）がおすすめ。空行は無視、重複は除去されます。</label>
      <textarea id="cardText" spellcheck="false" placeholder="例：
形のない
みんなの
空を飛ぶ
外国の
回る
おいしい
使うとなくなる
美しい
私の好きな
…"></textarea>
    </section>
  </main>

  <!-- Player row template -->
  <template id="tplPlayer">
    <div class="player-item" draggable="true">
      <div class="swatch" data-role="swatch"></div>
      <input type="text" data-role="name" placeholder="プレイヤー名" />
      <button class="btn ghost drag" title="ドラッグで並べ替え" data-role="drag">↕</button>
      <button class="btn danger" data-role="remove">削除</button>
    </div>
  </template>

  <script src="app.js"></script>
</body>
</html>
